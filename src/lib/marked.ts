/* eslint-disable no-useless-escape */
import marked from 'marked';

for (const ruleName of ['normal', 'gfm', 'breaks', 'pedantic']) {
    marked.InlineLexer.rules[ruleName] = Object.assign(marked.InlineLexer.rules[ruleName], {
        strong: /^\*(?!\*)((?:[^\*\n]*?[^\*])?)\*(?!(\*|[^\s?!.]))|^(?!(\*|[^\s?!.]))\*(?!\*)((?:[^\*\n]*?[^\*])?)\*(?!(\*|[^\s?!.]))/,
        em: /^_(?!_)((?:[^_\n]*?[^_])?)_(?!(_|[^\s?!.]))|^(?!(_|[^\s?!.]))_(?!_)((?:[^_\n]*?[^_])?)_(?!(_|[^\s?!.]))/,
    });
}

export default marked;

//    strong: /^\*([^\s*<\[]+)\*(?!\*)|^\*([^\s*"<\[]+[\s\S]*?[^\s])\*(?!\*)|^\*([^\s<"]+[\s\S]*?[^\s\*]+)\*(?!\*|[^\spunctuation])/,
//  (^|[\s?!.])_(?!_)((?:[^_\n]*?[^_])?)_(?!(_|[^\s\?!.]))
// strong: /^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/
// em: /^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\s!"#$%&'()*+,\-./:;<=>?@\[^_{|}~])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\s!"#$%&'()*+,\-./:;<=>?@\[^_{|}~])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\s!"#$%&'()*+,\-./:;<=>?@\[^_{|}~])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/